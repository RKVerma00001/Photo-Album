<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D Carousel Fully Responsive</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      margin: 0;
      height: 100vh;
      width: 100vw;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #dce7eb, #6839e0 60%, #4fc3f7 100%);
      background-size: 400% 400%;
      overflow: hidden;
      perspective: 1500px; 
      font-family: sans-serif;
      position: relative;
    }

    /* Album fullscreen background - responsive */
    .album-bg {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: 0;
      opacity: 0;
      pointer-events: none;
      transform: translateY(-120px);
      transition: opacity 0.7s, transform 0.7s cubic-bezier(.77,0,.18,1);
    }
    .album-bg.show { opacity: 0.25; transform: translateY(0); }
    .album-bg.hide { opacity: 0; transform: translateY(-120px); }

    /* Intro overlay */
    .intro-overlay {
      position: fixed;
      inset: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      background: rgba(30,30,60,0.95);
      z-index: 9999;
      transition: transform 0.7s cubic-bezier(.77,0,.18,1), opacity 0.5s;
      opacity: 1;
    }
    .intro-overlay.hide { opacity: 0; transform: translateY(-100%); pointer-events: none; }

    .intro-image {
      max-width: 90vw;
      max-height: 90vh;
      border-radius: 2rem;
      box-shadow: 0 0 60px #4fc3f7, 0 0 120px #6839e0;
      cursor: pointer;
      opacity: 0;
      transform: translateY(-120px) scale(1);
      animation: slideDownIntro 1s cubic-bezier(.77,0,.18,1) 0.2s forwards;
    }
    @keyframes slideDownIntro { to { opacity:1; transform: translateY(0) scale(1); } }

    .intro-text {
      position: absolute;
      bottom: 8vh;
      left: 50%;
      transform: translateX(-50%);
      color: #fff;
      font-size: clamp(1.2rem, 2vw, 2.2rem);
      font-weight: 600;
      text-align: center;
      text-shadow: 0 2px 16px #6839e0;
      pointer-events: none;
    }

    /* Carousel wrapper */
    .carousel-wrapper {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      width: 70vw;
      max-width: 1200px;
      height: 70vh;
      transition: opacity 0.7s;
      opacity: 1;
      z-index: 1;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .carousel-wrapper.hide { opacity:0; pointer-events:none; }

    .carousel {
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transform: rotateX(-10deg);
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .carousel img {
      position: absolute;
      width: clamp(80px, 18vw, 220px);
      aspect-ratio: 3/4;
      object-fit: cover;
      border-radius: 1rem;
      box-shadow: 0 10px 20px rgba(0,0,0,0.6);
      cursor: pointer;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      transition: transform 0.6s ease, opacity 0.4s ease, box-shadow 0.4s ease;
      z-index: 1;
    }

    .focused {
      position: fixed !important;
      left: 50% !important;
      top: 50% !important;
      transform: translate(-50%, -50%) scale(1.4) !important;
      z-index: 200 !important;
      box-shadow: 0 0 40px 10px #4fc3f7, 0 10px 40px rgba(0,0,0,0.7) !important;
      transition: transform 0.25s ease-out, box-shadow 0.25s ease-out;
    }

    .straight {
      position: fixed !important;
      bottom: 3vh !important;
      width: clamp(60px,12vw,100px) !important;
      aspect-ratio: 3/4;
      border-radius: 0.5rem !important;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3) !important;
      opacity: 0.85 !important;
      transform: translateX(var(--straight-x, 0)) scale(1) !important;
      z-index: 50 !important;
      transition: transform 0.25s ease-out, opacity 0.25s ease-out;
      cursor: pointer;
    }

    /* Sliders */
    .slider-horizontal, .slider-vertical {
      opacity: 0.2;
      transition: opacity 0.4s ease;
      z-index: 500;
    }
    .slider-horizontal:hover, .slider-vertical:hover { opacity:1; }

    .slider-horizontal {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: center;
      background: rgba(0,0,0,0.2);
      padding: 10px 15px;
      border-radius: 12px;
      box-shadow: 0 0 15px #4fc3f7, 0 0 30px #6839e0;
    }
    .slider-horizontal input[type="range"] { width: clamp(120px, 25vw, 250px); }

    .slider-vertical {
      position: fixed;
      top: 50%;
      left: 20px;
      transform: translateY(-50%) rotate(-90deg);
      display: flex;
      align-items: center;
      background: rgba(0,0,0,0.2);
      padding: 10px 15px;
      border-radius: 12px;
      box-shadow: 0 0 15px #4fc3f7, 0 0 30px #6839e0;
    }
    .slider-vertical input[type="range"] { width: clamp(120px, 25vw, 250px); }

    /* Media Queries */
    @media (max-width: 768px) {
      .carousel-wrapper { width: 90vw; height: 60vh; }
      .album-bg { width: 100vw; height: 100vh; }
    }
    @media (max-width: 480px) {
      .carousel-wrapper { width: 98vw; height: 55vh; }
      .straight { bottom: 5vh !important; }
      .album-bg { width: 100vw; height: 100vh; }
      .carousel img { width: clamp(60px, 32vw, 120px); }
    }
  </style>
</head>
<body>

  <img src="Images\memories.jpg" alt="Background" class="album-bg hide" id="albumBg">

  <div class="intro-overlay" id="introOverlay">
    <img src="/Images/memories.jpg" class="intro-image" id="introImage">
    <div class="intro-text"><br><span style="font-size:1.2rem;"></span></div>
  </div>

  <div class="carousel-wrapper hide" id="carouselWrapper">
    <div class="carousel">
      <img src="/Images/IMG_20250810_183353_178_AI.jpg" alt="">
      <img src="/Images/IMG_20250810_183354_906_AI.jpg" alt="">
      <img src="/Images/IMG_20250810_183403_018_AI.jpg" alt="">
      <img src="/Images/IMG_20250810_183413_127_AI.jpg" alt="">
      <img src="/Images/IMG_20250810_183430_915_AI.jpg" alt="">
      <img src="/Images/IMG_20250810_183433_801_AI.jpg" alt="">
      <img src="/Images/IMG_20250810_183500_427_AI.jpg" alt="">
      <img src="/Images/IMG_20250810_183641_584_AI.jpg" alt="">
      <img src="/Images/IMG_20250810_183702_740_AI.jpg" alt="">
      <img src="/Images/IMG_20250810_183721_331_AI.jpg" alt="">
      <img src="/Images/IMG_20250810_184924_764_AI.jpg" alt="">
      <img src="/Images/IMG_20250810_184937_371_AI.jpg" alt="">
      <img src="/Images/IMG_20250811_102311_105_AI.jpg" alt="">
    </div>
  </div>

  <div class="slider-horizontal" id="sliderHorizontal">
    <label>Horizontal</label>
    <input type="range" id="xSlider" min="0" max="100" value="50">
  </div>
  <div class="slider-vertical" id="sliderVertical">
    <label>Vertical</label>
    <input type="range" id="ySlider" min="0" max="100" value="50" orient="vertical">
  </div>

  <script>
    const introOverlay = document.getElementById('introOverlay');
    const introImage = document.getElementById('introImage');
    const carouselWrapper = document.getElementById('carouselWrapper');
    const albumBg = document.getElementById('albumBg');
    const carousel = document.querySelector('.carousel');
    const images = carousel.querySelectorAll('img');
    const imgCount = images.length;
    let angle = 0;
    let autoRotate = true;
    let focusedIndex = null;

    const xSlider = document.getElementById('xSlider');
    const ySlider = document.getElementById('ySlider');

    function showAlbum() {
      introOverlay.classList.add('hide');
      setTimeout(() => {
        albumBg.classList.remove('hide'); 
        albumBg.classList.add('show');
        setTimeout(() => { carouselWrapper.classList.remove('hide'); }, 700);
      }, 700);
    }
    introImage.addEventListener('click', showAlbum);

    function getRadius() {
      if(window.innerWidth<480) return 250;
      if(window.innerWidth<768) return 350;
      return 500;
    }

    function positionImages() {
      if(focusedIndex!==null) return;
      const radius = getRadius();
      for(let i=0;i<imgCount;i++){
        const theta=(360/imgCount)*i+angle;
        const z=Math.cos(theta*Math.PI/180)*radius;
        const scale=0.6 + 0.4*((z+radius)/(2*radius));
        const zIndex=Math.round(scale*10);
        images[i].classList.remove('focused','straight');
        images[i].style.transform=`rotateY(${theta}deg) translateZ(${radius}px) scale(${scale})`;
        images[i].style.zIndex=zIndex;
        images[i].style.opacity=1;
      }
    }

    function animate() {
      if(autoRotate && focusedIndex===null){ angle+=0.3; positionImages(); }
      requestAnimationFrame(animate);
    }

    Promise.all(Array.from(images).map(img=>new Promise(resolve=>img.complete?resolve():img.onload=resolve)))
      .then(()=>{ positionImages(); animate(); });

    // Hover stops rotation, click zooms
    images.forEach((img, idx) => {
      img.addEventListener('mouseenter', () => {
        autoRotate = false; // stop rotation on hover
      });

      img.addEventListener('mouseleave', () => {
        if(focusedIndex === null) autoRotate = true; // resume only if no zoom
      });

      img.addEventListener('click', () => {
        if(focusedIndex === idx){
          img.classList.remove('focused');
          images.forEach(im => im.classList.remove('straight'));
          focusedIndex = null;
          positionImages();
          autoRotate = true;
        } else {
          focusedIndex = idx;
          images.forEach(im => im.classList.remove('focused','straight'));
          img.classList.add('focused');

          let straightCount=0;
          for(let i=0;i<imgCount;i++){
            if(i!==idx){
              images[i].classList.add('straight');
              images[i].style.setProperty('--straight-x', `${(straightCount-(imgCount-2)/2)*7}vw`);
              straightCount++;
            }
          }
        }
      });
    });


    // Click outside any image to release zoom
carouselWrapper.addEventListener('click', (e) => {
  if (focusedIndex !== null && !e.target.closest('img')) {
    images[focusedIndex].classList.remove('focused');
    images.forEach(im => im.classList.remove('straight'));
    focusedIndex = null;
    positionImages();
    autoRotate = true;
  }
});
    xSlider.addEventListener('input',()=>{ carouselWrapper.style.left=`${xSlider.value}vw`; });
    ySlider.addEventListener('input',()=>{ carouselWrapper.style.top=`${ySlider.value}vh`; });
    window.addEventListener('resize',positionImages);
  </script>
</body>
</html>

